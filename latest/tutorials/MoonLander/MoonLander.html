<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Moon Lander · NLOptControl.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Ubuntu+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link href="../../assets/highlightjs/default.css" rel="stylesheet" type="text/css"/><link href="../../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>NLOptControl.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" action="../../search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../../index.html">Home</a></li><li><span class="toctext">Tutorials</span><ul><li class="current"><a class="toctext" href="MoonLander.html">Moon Lander</a><ul class="internal"></ul></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Tutorials</li><li><a href="MoonLander.html">Moon Lander</a></li></ul><a class="edit-page" href="https://github.com/JuliaMPC/MPCDocs.jl/tree/34b5b3a471cd2d68b14753492c79106681c7c4ab/docs/src/tutorials/MoonLander/MoonLander.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/></header><h1><a class="nav-anchor" id="Moon-Lander-1" href="#Moon-Lander-1">Moon Lander</a></h1><pre><code class="language-">using NLOptControl,JuMP,Parameters,PrettyPlots,Plots
main_dir=pwd();s=Settings();n=NLOpt();pgfplots();
const g = 1.62519; # m/s^2
function MoonLander{T&lt;:Any}(mdl::JuMP.Model,n::NLOpt,r::Result,x::Array{T,2},u::Array{T,2}) # dynamic constraint equations
  if n.integrationMethod==:tm; L=size(x)[1]; else L=size(x)[1]-1; end
  dx = Array(Any,L,n.numStates)
  dx[:,1] =  @NLexpression(mdl, [j=1:L], x[j,2] );
  dx[:,2] =  @NLexpression(mdl, [j=1:L], u[j,1] - g);
  return dx
end
define!(n,stateEquations=MoonLander,numStates=2,numControls=1,X0=[10.,-2],XF=[0.,0.],XL=[NaN,NaN],XU=[NaN,NaN],CL=[0.],CU=[3.])
configure!(n,Ni=4,Nck=[10,10,10,10];(:integrationMethod =&gt; :ps),(:integrationScheme =&gt; :lgrExplicit),(:finalTimeDV =&gt;true))
#configure!(n,N=40;(:integrationMethod =&gt; :tm),(:integrationScheme =&gt; :bkwEuler),(:finalTimeDV =&gt;true))

names = [:h,:v]; descriptions = [&quot;h(t)&quot;,&quot;v(t)&quot;]; stateNames!(n,names,descriptions);
mdl=defineSolver!(n;name=:IPOPT,max_iter=1000,feastol_abs=1.0e-3,infeastol=1.0e-8,opttol_abs=1.0e-3); r=OCPdef!(mdl,n,s);
obj=integrate!(mdl,n,r.u[:,1];C=1.0,(:variable=&gt;:control),(:integrand=&gt;:default))
@NLobjective(mdl, Min, obj); optimize!(mdl,n,r,s);
plotSettings(;(:mpc_lines =&gt;[(4.0,:blue,:solid)]),(:size=&gt;(700,700)));
allPlots(n,r,1);
r.dfs_opt</code></pre><p><img src="results/main.png" alt/></p><footer><hr/><a class="previous" href="../../index.html"><span class="direction">Previous</span><span class="title">Home</span></a></footer></article></body></html>
